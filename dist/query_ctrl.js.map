{"version":3,"sources":["../src/query_ctrl.js"],"names":["GenericDatasourceQueryCtrl","$scope","$injector","scope","target","site","host","service","metric","datasource","sitesQuery","hostsQuery","servicesQuery","metricsQuery","rawQuery","panelCtrl","refresh","onChangeInternal","QueryCtrl","templateUrl"],"mappings":";;;;;;;;;AAAA;;AACA;;;;;;;;IAEaA,0B,WAAAA,0B;;;AAET,wCAAYC,MAAZ,EAAoBC,SAApB,EAAgC;AAAA;;AAAA,4JACtBD,MADsB,EACdC,SADc;;AAG5B,cAAKC,KAAL,GAAaF,MAAb;AACA,cAAKG,MAAL,CAAYC,IAAZ,GAAmB,MAAKD,MAAL,CAAYC,IAAZ,IAAoB,EAAvC;AACA,cAAKD,MAAL,CAAYE,IAAZ,GAAmB,MAAKF,MAAL,CAAYE,IAAZ,IAAoB,EAAvC;AACA,cAAKF,MAAL,CAAYG,OAAZ,GAAsB,MAAKH,MAAL,CAAYG,OAAZ,IAAuB,EAA7C;AACA,cAAKH,MAAL,CAAYI,MAAZ,GAAqB,MAAKJ,MAAL,CAAYI,MAAZ,IAAsB,IAAtB,GAA6B,MAAKJ,MAAL,CAAYI,MAAzC,GAAkD,EAAvE;AAP4B;AAQ/B;;;;yCAEgB;AACb,mBAAO,KAAKC,UAAL,CAAgBC,UAAhB,CAA2B,KAAKN,MAAhC,CAAP;AACH;;;yCAEgB;AACb,mBAAO,KAAKK,UAAL,CAAgBE,UAAhB,CAA2B,KAAKP,MAAhC,CAAP;AACH;;;4CAEmB;AAChB,mBAAO,KAAKK,UAAL,CAAgBG,aAAhB,CAA8B,KAAKR,MAAnC,CAAP;AACH;;;2CAEkB;AACf,mBAAO,KAAKK,UAAL,CAAgBI,YAAhB,CAA6B,KAAKT,MAAlC,CAAP;AACH;;;2CAEkB;AACf,iBAAKA,MAAL,CAAYU,QAAZ,GAAuB,CAAC,KAAKV,MAAL,CAAYU,QAApC;AACH;;;2CAEkB;AACf,iBAAKC,SAAL,CAAeC,OAAf,GADe,CACW;AAC7B;;;uCAEc;AACX,iBAAKZ,MAAL,CAAYE,IAAZ,GAAmB,EAAnB;AACA,iBAAKF,MAAL,CAAYG,OAAZ,GAAsB,EAAtB;AACA,iBAAKH,MAAL,CAAYI,MAAZ,GAAqB,EAArB;AACA,iBAAKS,gBAAL;AACH;;;uCAEc;AACX,iBAAKb,MAAL,CAAYG,OAAZ,GAAsB,EAAtB;AACA,iBAAKH,MAAL,CAAYI,MAAZ,GAAqB,EAArB;AACA,iBAAKS,gBAAL;AACH;;;0CAEiB;AACd,iBAAKb,MAAL,CAAYI,MAAZ,GAAqB,EAArB;AACA,iBAAKS,gBAAL;AACH;;;yCAEgB;AACb,iBAAKA,gBAAL;AACH;;;;EAxD2CC,c;;AA2DhDlB,2BAA2BmB,WAA3B,GAAyC,4BAAzC","file":"query_ctrl.js","sourcesContent":["import {QueryCtrl} from 'app/plugins/sdk';\nimport './css/query-editor.css!';\n\nexport class GenericDatasourceQueryCtrl extends QueryCtrl {\n\n    constructor($scope, $injector)  {\n        super($scope, $injector);\n\n        this.scope = $scope;\n        this.target.site = this.target.site || '';\n        this.target.host = this.target.host || '';\n        this.target.service = this.target.service || '';\n        this.target.metric = this.target.metric != null ? this.target.metric : '';\n    }\n\n    getSiteOptions() {\n        return this.datasource.sitesQuery(this.target);\n    }\n\n    getHostOptions() {\n        return this.datasource.hostsQuery(this.target);\n    }\n\n    getServiceOptions() {\n        return this.datasource.servicesQuery(this.target);\n    }\n\n    getMetricOptions() {\n        return this.datasource.metricsQuery(this.target);\n    }\n\n    toggleEditorMode() {\n        this.target.rawQuery = !this.target.rawQuery;\n    }\n\n    onChangeInternal() {\n        this.panelCtrl.refresh(); // Asks the panel to refresh data.\n    }\n\n    onSiteChange() {\n        this.target.host = '';\n        this.target.service = '';\n        this.target.metric = '';\n        this.onChangeInternal();\n    }\n\n    onHostChange() {\n        this.target.service = '';\n        this.target.metric = '';\n        this.onChangeInternal();\n    }\n\n    onServiceChange() {\n        this.target.metric = '';\n        this.onChangeInternal();\n    }\n\n    onMetricChange() {\n        this.onChangeInternal();\n    }\n}\n\nGenericDatasourceQueryCtrl.templateUrl = 'partials/query.editor.html';\n"]}