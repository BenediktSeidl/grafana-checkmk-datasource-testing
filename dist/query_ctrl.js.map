{"version":3,"sources":["../src/query_ctrl.js"],"names":["GenericDatasourceQueryCtrl","$scope","$injector","scope","target","site","host","service","mode","metric","graph","datasource","sitesQuery","hostsQuery","servicesQuery","metricsQuery","graphsQuery","text","value","rawQuery","panelCtrl","refresh","onChangeInternal","QueryCtrl","templateUrl"],"mappings":";;;;;;;;;AAAA;;AACA;;;;;;;;IAEaA,0B,WAAAA,0B;;;AAET,wCAAYC,MAAZ,EAAoBC,SAApB,EAAgC;AAAA;;AAAA,4JACtBD,MADsB,EACdC,SADc;;AAG5B,cAAKC,KAAL,GAAaF,MAAb;AACA,cAAKG,MAAL,CAAYC,IAAZ,GAAmB,MAAKD,MAAL,CAAYC,IAAZ,IAAoB,EAAvC;AACA,cAAKD,MAAL,CAAYE,IAAZ,GAAmB,MAAKF,MAAL,CAAYE,IAAZ,IAAoB,EAAvC;AACA,cAAKF,MAAL,CAAYG,OAAZ,GAAsB,MAAKH,MAAL,CAAYG,OAAZ,IAAuB,EAA7C;AACA,cAAKH,MAAL,CAAYI,IAAZ,GAAmB,MAAKJ,MAAL,CAAYI,IAAZ,IAAoB,OAAvC;AACA,cAAKJ,MAAL,CAAYK,MAAZ,GAAqB,MAAKL,MAAL,CAAYK,MAAZ,IAAsB,IAAtB,GAA6B,MAAKL,MAAL,CAAYK,MAAzC,GAAkD,EAAvE;AACA,cAAKL,MAAL,CAAYM,KAAZ,GAAoB,MAAKN,MAAL,CAAYM,KAAZ,IAAqB,IAArB,GAA4B,MAAKN,MAAL,CAAYM,KAAxC,GAAgD,EAApE;AAT4B;AAU/B;;;;yCAEgB;AACb,mBAAO,KAAKC,UAAL,CAAgBC,UAAhB,CAA2B,KAAKR,MAAhC,CAAP;AACH;;;yCAEgB;AACb,mBAAO,KAAKO,UAAL,CAAgBE,UAAhB,CAA2B,KAAKT,MAAhC,CAAP;AACH;;;4CAEmB;AAChB,mBAAO,KAAKO,UAAL,CAAgBG,aAAhB,CAA8B,KAAKV,MAAnC,CAAP;AACH;;;2CAEkB;AACf,mBAAO,KAAKO,UAAL,CAAgBI,YAAhB,CAA6B,KAAKX,MAAlC,CAAP;AACH;;;0CAEiB;AACd,mBAAO,KAAKO,UAAL,CAAgBK,WAAhB,CAA4B,KAAKZ,MAAjC,CAAP;AACH;;;yCAEgB;AACb,mBAAO,CAAC,EAACa,MAAM,kBAAP,EAA2BC,OAAO,OAAlC,EAAD,EAA6C,EAACD,MAAM,eAAP,EAAwBC,OAAO,QAA/B,EAA7C,CAAP;AACH;;;2CAEkB;AACf,iBAAKd,MAAL,CAAYe,QAAZ,GAAuB,CAAC,KAAKf,MAAL,CAAYe,QAApC;AACH;;;2CAEkB;AACf,iBAAKC,SAAL,CAAeC,OAAf,GADe,CACW;AAC7B;;;uCAEc;AACX,iBAAKjB,MAAL,CAAYE,IAAZ,GAAmB,EAAnB;AACA,iBAAKF,MAAL,CAAYG,OAAZ,GAAsB,EAAtB;AACA,iBAAKH,MAAL,CAAYK,MAAZ,GAAqB,EAArB;AACA,iBAAKL,MAAL,CAAYM,KAAZ,GAAoB,EAApB;AACA,iBAAKY,gBAAL;AACH;;;uCAEc;AACX,iBAAKlB,MAAL,CAAYG,OAAZ,GAAsB,EAAtB;AACA,iBAAKH,MAAL,CAAYK,MAAZ,GAAqB,EAArB;AACA,iBAAKL,MAAL,CAAYM,KAAZ,GAAoB,EAApB;AACA,iBAAKY,gBAAL;AACH;;;0CAEiB;AACd,iBAAKlB,MAAL,CAAYK,MAAZ,GAAqB,EAArB;AACA,iBAAKL,MAAL,CAAYM,KAAZ,GAAoB,EAApB;AACA,iBAAKY,gBAAL;AACH;;;yCAEgB;AACb,iBAAKA,gBAAL;AACH;;;wCAEe;AACZ,iBAAKA,gBAAL;AACH;;;uCAEc;AACX,iBAAKA,gBAAL;AACH;;;;EA7E2CC,c;;AAgFhDvB,2BAA2BwB,WAA3B,GAAyC,4BAAzC","file":"query_ctrl.js","sourcesContent":["import {QueryCtrl} from 'app/plugins/sdk';\nimport './css/query-editor.css!';\n\nexport class GenericDatasourceQueryCtrl extends QueryCtrl {\n\n    constructor($scope, $injector)  {\n        super($scope, $injector);\n\n        this.scope = $scope;\n        this.target.site = this.target.site || '';\n        this.target.host = this.target.host || '';\n        this.target.service = this.target.service || '';\n        this.target.mode = this.target.mode || 'graph';\n        this.target.metric = this.target.metric != null ? this.target.metric : '';\n        this.target.graph = this.target.graph != null ? this.target.graph : '';\n    }\n\n    getSiteOptions() {\n        return this.datasource.sitesQuery(this.target);\n    }\n\n    getHostOptions() {\n        return this.datasource.hostsQuery(this.target);\n    }\n\n    getServiceOptions() {\n        return this.datasource.servicesQuery(this.target);\n    }\n\n    getMetricOptions() {\n        return this.datasource.metricsQuery(this.target);\n    }\n\n    getGraphOptions() {\n        return this.datasource.graphsQuery(this.target);\n    }\n\n    getModeOptions() {\n        return [{text: 'predefined graph', value: 'graph'}, {text: 'single metric', value: 'metric'}];\n    }\n\n    toggleEditorMode() {\n        this.target.rawQuery = !this.target.rawQuery;\n    }\n\n    onChangeInternal() {\n        this.panelCtrl.refresh(); // Asks the panel to refresh data.\n    }\n\n    onSiteChange() {\n        this.target.host = '';\n        this.target.service = '';\n        this.target.metric = '';\n        this.target.graph = '';\n        this.onChangeInternal();\n    }\n\n    onHostChange() {\n        this.target.service = '';\n        this.target.metric = '';\n        this.target.graph = '';\n        this.onChangeInternal();\n    }\n\n    onServiceChange() {\n        this.target.metric = '';\n        this.target.graph = '';\n        this.onChangeInternal();\n    }\n\n    onMetricChange() {\n        this.onChangeInternal();\n    }\n\n    onGraphChange() {\n        this.onChangeInternal();\n    }\n\n    onModeChange() {\n        this.onChangeInternal();\n    }\n}\n\nGenericDatasourceQueryCtrl.templateUrl = 'partials/query.editor.html';\n"]}